"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[763],{2647:function(n,e,t){var o=t(5893),r=(t(7294),t(2440));e.Z=function(n){n.loading;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"loader-overlay",children:(0,o.jsx)(r.Z1,{height:100,width:100,color:"#6cd27e",wrapperStyle:{},wrapperClass:"",visible:!0,ariaLabel:"three-circles-rotating",secondaryColor:"#FF6600",strokeWidth:4,strokeWidthSecondary:2})})})}},7465:function(n,e,t){t.d(e,{Aj:function(){return i},Hw:function(){return r},QP:function(){return a},_V:function(){return s},_n:function(){return o},qi:function(){return c}});var o="http://34.230.50.80/api/",r="".concat(o,"user/user-signin"),i="".concat(o,"movie/create-movie"),c="".concat(o,"movie/update-movie/"),a="".concat(o,"movie/movie-list"),s="".concat(o,"movie/movie-by-id/")},763:function(n,e,t){t.r(e),t.d(e,{MovieList:function(){return P}});var o=t(7568),r=t(4051),i=t.n(r),c=t(5893),a=t(9238),s=t(6886),l=t(6242),u=t(3965),d=t(4267),f=t(5861),h=t(3321),p=t(3946),g=t(6447),v=t(5054),m=t(896),x=t(6462),j=t(1163),Z=t(1955),y=t(7294),k=t(3827),C=t(7465),w=t(2647),P=function(n){var e=n.movies,t=(0,j.useRouter)();return(0,c.jsx)(a.Z,{width:"100%",children:(0,c.jsx)(s.ZP,{container:!0,spacing:3,children:e.map((function(n,e){return(0,c.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:3,lg:3,children:(0,c.jsxs)(l.Z,{style:{backgroundColor:"#002B39",height:"auto"},onClick:function(){var e={movieId:n._id};t.push({pathname:"/update-movie",query:e})},children:[(0,c.jsx)(u.Z,{component:"img",height:"200",style:{borderRadius:"15px",padding:10},image:"".concat(C._n).concat(n.poster)}),(0,c.jsxs)(d.Z,{children:[(0,c.jsx)(f.Z,{style:{color:"#fff"},gutterBottom:!0,variant:"h5",component:"div",children:null===n||void 0===n?void 0:n.title}),(0,c.jsx)(f.Z,{style:{color:"#fff"},gutterBottom:!0,variant:"h5",component:"div",children:null===n||void 0===n?void 0:n.publishingYear})]})]})},e)}))})})};e.default=function(){var n=(0,j.useRouter)(),e=(0,y.useState)([]),t=e[0],r=e[1],l=(0,y.useState)(!1),u=l[0],d=l[1],C=(0,y.useState)(1),b=C[0],S=C[1],_=(0,y.useState)(8),N=_[0],I=(_[1],(0,y.useState)(null)),F=I[0],A=I[1],E=(0,y.useState)(1),L=E[0],R=E[1];(0,y.useEffect)((function(){q(1)}),[]);var q=function(){var n=(0,o.Z)(i().mark((function n(e){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d(!u),n.next=3,(0,k.sm)(e,N).then((function(n){console.log("res",n,n.data.totalCount);var e,t,o,i=n.data.totalPages;(console.log("res",i),n.success)?(null===n||void 0===n?void 0:n.data)&&(null===n||void 0===n||null===(e=n.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length)>0?(r(null===n||void 0===n||null===(o=n.data)||void 0===o?void 0:o.data),A(n.data.totalPages),R(Number(n.data.currentPage)),d(!1)):d(!1):(alert(n.message),d(!1))})).catch((function(n){d(!1),alert(n)}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();(0,y.useEffect)((function(){function n(){return n=(0,o.Z)(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("initialData"),n.next=3,(0,k.sm)(b,N).then((function(n){var e,t,o;n.success?(console.log("response.data[0]",n.data),(null===n||void 0===n?void 0:n.data)&&(null===n||void 0===n||null===(e=n.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length)>0?(r(null===n||void 0===n||null===(o=n.data)||void 0===o?void 0:o.data),d(!1)):d(!1)):(alert(n.message),d(!1))})).catch((function(n){d(!1),alert(n)}));case 3:case"end":return n.stop()}}),n)}))),n.apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[]);return console.log("currentPage",F),(0,c.jsx)(c.Fragment,{children:u?(0,c.jsx)(w.Z,{}):(0,c.jsx)(c.Fragment,{children:t&&0===t.length?(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(a.Z,{className:"content-center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:[(0,c.jsx)(f.Z,{style:{color:"#fff"},variant:"h6",children:"Your movie list is empty"}),(0,c.jsx)(a.Z,{marginTop:2,children:(0,c.jsx)(h.Z,{size:"large",variant:"contained",sx:{padding:"15px 126px 15px 126px",borderRadius:"10px",height:"54px"},onClick:function(){n.push("/add-movie")},children:"Add a new Movie"})})]})}):(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(a.Z,{flexDirection:"column",alignItems:"center",height:"100vh",children:[(0,c.jsx)(a.Z,{style:{padding:20},maxWidth:"1100px",mx:"auto",children:(0,c.jsxs)(s.ZP,{container:!0,alignItems:"center",color:"white",padding:2,children:[(0,c.jsxs)(s.ZP,{item:!0,xs:9,container:!0,alignItems:"center",spacing:2,children:[(0,c.jsx)(f.Z,{style:{color:"#fff"},variant:"h6",children:"Create Movie"}),(0,c.jsx)(p.Z,{color:"inherit",onClick:function(){console.log("Add movie clicked"),n.push("/add-movie")},children:(0,c.jsx)(m.Z,{})})]}),(0,c.jsx)(s.ZP,{item:!0,xs:3,container:!0,justifyContent:"flex-end",children:(0,c.jsx)(h.Z,{color:"inherit",endIcon:(0,c.jsx)(x.Z,{}),onClick:function(){Z.Z.set("loggedin","false"),localStorage.removeItem("token"),n.push("/login"),console.log("Logout clicked")},children:"Logout"})})]})}),(0,c.jsx)(a.Z,{style:{maxWidth:"1100px",margin:"0 auto",textAlign:"center"},children:(0,c.jsx)(P,{movies:t})}),(0,c.jsx)(a.Z,{style:{padding:"2%",display:"flex",justifyContent:"center"},children:(0,c.jsx)(g.Z,{spacing:2,alignContent:"center",children:(0,c.jsx)(v.Z,{count:F,color:"primary",page:L,onChange:function(n,e){console.log("pag",e),S(e),q(e)}})})})]})})})})}},3827:function(n,e,t){t.d(e,{M6:function(){return h},sm:function(){return g},Hw:function(){return v},o:function(){return f},Pk:function(){return p}});var o=t(7465),r=t(7568),i=t(6042),c=t(4051),a=t.n(c),s=t(5121),l={timeout:45e3},u=function(n){var e=s.Z.create((0,i.Z)({},l,{baseURL:n}));return e.CancelToken=s.Z.CancelToken,e.isCancel=s.Z.isCancel,e.interceptors.request.use(function(){var n=(0,r.Z)(a().mark((function n(e){var t,o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=localStorage.getItem("token"),console.log("acc",t),o=(0,i.Z)({},e),t&&(o.headers.Authorization="".concat(t)),n.abrupt("return",o);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),e.interceptors.response.use((function(n){return 200==n.status||201==n.status?n.data:[]}),(function(n){if("Network Error"===n.toJSON().message&&alert("Network Error","Please Check Network connection"),!n.config.url.includes("logout")&&!e.isCancel(n))return n.response&&401===n.response.status?(console.warn("---",n),n):n})),e}(o._n),d=u,f=function(n){return d.post("".concat(o.Hw),n)},h=function(n){return d.post("".concat(o.Aj),n)},p=function(n,e){return d.post("".concat(o.qi).concat(n),e)},g=function(n,e){return d.post("".concat(o.QP,"?page=").concat(n,"&limit=").concat(e))},v=function(n){return d.get("".concat(o._V).concat(n))}}}]);